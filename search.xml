<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[PMM部署方案]]></title>
    <url>%2F2019%2F04%2F03%2Fpmm-install%2F</url>
    <content type="text"><![CDATA[安装包准备PMM 有两种安装方式： 使用Docker进行部署 直接下载官方提供的集成了PMM的OVF文件 部署环境 操作系统： Centos 7 内存：3G 硬盘：30GB 逻辑架构 部署步骤 操作系统是部署Docker123yum -y install dockersystemctl start docker.servicesystemctl enable docker.service Docker上部署PMM12345678910111213141516docker pull percona/pmm-server:latestdocker create \ -v /opt/prometheus/data \ -v /opt/consul-data \ -v /var/lib/mysql \ -v /var/lib/grafana \ --name pmm-data \ percona/pmm-server:latest /bin/true docker run -d \ -p 80:80 \ --volumes-from pmm-data \ --name pmm-server \ --restart always \ percona/pmm-server:latest 至此PMM基于Docker上的安装就结束了默认密码是admin/admin 配置 监控告警通知工具 123456 集成有多种告警通知方案，dingding,telegram,email等等，实时性较高的telegram；在这里，主要就telegram来进行配置： 登录系统后，进入[Alerting]----[Notification channels]----[+new channels] 输入name之后，在type栏选择telegram，然后去申请telegram api进行配置。 telegram bot api 需要关注@BotFather之后按提示进行操作，创建好bot之后，新建一个聊天群组，将bot与需要接收通知的人加入到群组中。之后发送/hello @dbotibot，之后通过这个方法获取到chat_idhttps://api.telegram.org/botxxx:xxx/getUpdates将获取到底id配置到配置项里面，测试发送，能正常收到信息即可。 配置监控对象 123456在上报端安装需要安装client并且进行配置，才能够将信息提交到PMM服务器上。yum install https://repo.percona.com/yum/percona-release-latest.noarch.rpmyum -y install pmm-client完成安装之后可以使用pmm-admin命令行模式进行管理pmm-admin config --server x.x.x.x 命令将被监控端数据提交到监控端。 添加相关监控项 12345pmm-admin add xxxx name option添加监控到视图如需要监控mysql：pmm-admin add mysql --user=xxx --password=xxx --host=x.x.x.x(如果在上报端执行，则此处填写本机ip；如果在收集端执行，此处执行mysql端ip) 监控MYSQL需要安装percona-tookit，需要提前安装环境包： 12yum -y install perl-Digest-MD5 perl-DBI perl-DBD-MySQL perl-TermReadKey perl-devel perl-Time-HiRes perl-IO-Socket-SSLyum -y install percona-toolkit 验收验收其实很简单，打开home dashboard，查看监控项是否已经被加入，数据是否能正常被更新1http://x.x.x.x/graph/打开平台网址 需要针对性检查： Query analytics Mysql PMM每项都必须进行校验数据是否被收集更新，另外，可以对数据库或者服务器进行一个压力测试，以检测数据是否被正常收集。]]></content>
      <categories>
        <category>database</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ogg静默安装]]></title>
    <url>%2F2019%2F04%2F03%2Fogg-silent-install%2F</url>
    <content type="text"><![CDATA[解压ogg安装包1unzip fbo_ggs_Linux_x64_shiphome.zip 创建ogg安装目录1mkdir /ogg 该目录需要使用root创建,并授权给oracle用户使用。 配置应答文件 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273######################################################################Copyright(c) Oracle Corporation 2014. All rights reserved. ## Specify values for the variables listed below to customize ## your installation. ## Each variable is associated with a comment. The comment ## can help to populate the variables with the appropriate ## values. ## IMPORTANT NOTE: This file should be secured to have read ## permission only by the oracle user or an administrator who ## own this installation to protect any sensitive input values. #####################################################################-------------------------------------------------------------------------------# Do not change the following system generated value.#-------------------------------------------------------------------------------oracle.install.responseFileVersion=/oracle/install/rspfmt_ogginstall_response_schema_v12_1_2########################################################################## Oracle GoldenGate installation option and details #######################################################################-------------------------------------------------------------------------------# Specify the installation option.# Specify ORA12c for installing Oracle GoldenGate for Oracle Database 12c and# ORA11g for installing Oracle GoldenGate for Oracle Database 11g#-------------------------------------------------------------------------------INSTALL_OPTION=ORA11g 指定同步数据库版本#-------------------------------------------------------------------------------# Specify a location to install Oracle GoldenGate#-------------------------------------------------------------------------------SOFTWARE_LOCATION=/oradata/ogg 指定安装目录#-------------------------------------------------------------------------------# Specify true to start the manager after installation.#-------------------------------------------------------------------------------START_MANAGER=false#-------------------------------------------------------------------------------# Specify a free port within the valid range for the manager process.# Required only if START_MANAGER is true.#-------------------------------------------------------------------------------MANAGER_PORT=#-------------------------------------------------------------------------------# Specify the location of the Oracle Database.# Required only if START_MANAGER is true.#-------------------------------------------------------------------------------DATABASE_LOCATION=########################################################################### Specify details to Create inventory for Oracle installs ## Required only for the first Oracle product install on a system. #### #####################################################################-------------------------------------------------------------------------------# Specify the location which holds the install inventory files.# This is an optional parameter if installing on# Windows based Operating System.#-------------------------------------------------------------------------------INVENTORY_LOCATION=/u01/app/oracle/oraInventory 指定inventory目录的位置#-------------------------------------------------------------------------------# Unix group to be set for the inventory directory.# This parameter is not applicable if installing on# Windows based Operating System.#-------------------------------------------------------------------------------UNIX_GROUP_NAME=oinstall 使用应答文件进行OGG软件安装1./runInstaller -silent -responseFile /home/oracle/fbo_ggs_Linux_x64_shiphome/Disk1/response/oggcore.rsp 看到如下信息说明安装成功：1The installation of Oracle GoldenGate Core was successful.Please check &apos;/u01/app/oracle/oraInventory/logs/silentInstall2017-05-04_03-25-48PM.log&apos; for more details.Successfully Setup Software.]]></content>
      <categories>
        <category>database</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[ORACLE数据库备份检查脚本]]></title>
    <url>%2F2019%2F04%2F02%2Foracle-backup%2F</url>
    <content type="text"><![CDATA[ORACLE数据库备份结果检查：123456789101112131415161718192021222324SELECT A.RECID &quot;BACKUP SET&quot;, A.SET_STAMP, DECODE (B.INCREMENTAL_LEVEL, &apos;&apos;, DECODE (BACKUP_TYPE, &apos;L&apos;, &apos;Archivelog&apos;, &apos;Full&apos;), 1, &apos;Incr-1&apos;, 0, &apos;Incr-0&apos;, B.INCREMENTAL_LEVEL) &quot;Type LV&quot;, B.CONTROLFILE_INCLUDED &quot;including CTL&quot;, DECODE (A.STATUS, &apos;A&apos;, &apos;AVAILABLE&apos;, &apos;D&apos;, &apos;DELETED&apos;, &apos;X&apos;, &apos;EXPIRED&apos;, &apos;ERROR&apos;) &quot;STATUS&quot;, A.DEVICE_TYPE &quot;Device Type&quot;, A.START_TIME &quot;Start Time&quot;, A.COMPLETION_TIME &quot;Completion Time&quot;, A.ELAPSED_SECONDS &quot;Elapsed Seconds&quot;, A.TAG &quot;Tag&quot;, A.HANDLE &quot;Path&quot; FROM GV$BACKUP_PIECE A, GV$BACKUP_SET B WHERE A.SET_STAMP = B.SET_STAMP AND A.DELETED = &apos;NO&apos;ORDER BY A.COMPLETION_TIME DESC;]]></content>
      <categories>
        <category>database</category>
      </categories>
  </entry>
</search>
